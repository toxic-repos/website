<script lang="ts">
import { defineComponent, inject } from 'vue'
import VHeaderButtonIcon from 'src/components/VHeaderButtonIcon.vue'
import VHeaderButton from 'src/components/VHeaderButton.vue'
import type { UseDrawer, UseTheme } from 'types'

export default defineComponent({
  components: { VHeaderButton, VHeaderButtonIcon },
  setup() {
    const drawer = inject('drawer') as UseDrawer
    const { themeMode, themeToggle } = inject('theme') as UseTheme

    return {
      drawer,
      themeMode,
      themeToggle
    }
  }
})
</script>

<template>
  <div :class="$style.header">
    <div :class="$style.headerLeft">
      <v-header-button-icon @click="drawer.toggle">
        <svg v-if="drawer.isOpen.value === true" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M3.75 18C3.53333 18 3.35417 17.9292 3.2125 17.7875C3.07083 17.6458 3 17.4667 3 17.25C3 17.0333 3.07083 16.8542 3.2125 16.7125C3.35417 16.5708 3.53333 16.5 3.75 16.5H15.25C15.4667 16.5 15.6458 16.5708 15.7875 16.7125C15.9292 16.8542 16 17.0333 16 17.25C16 17.4667 15.9292 17.6458 15.7875 17.7875C15.6458 17.9292 15.4667 18 15.25 18H3.75ZM3.75 12.7C3.53333 12.7 3.35417 12.6292 3.2125 12.4875C3.07083 12.3458 3 12.1667 3 11.95C3 11.7333 3.07083 11.5542 3.2125 11.4125C3.35417 11.2708 3.53333 11.2 3.75 11.2H12.25C12.4667 11.2 12.6458 11.2708 12.7875 11.4125C12.9292 11.5542 13 11.7333 13 11.95C13 12.1667 12.9292 12.3458 12.7875 12.4875C12.6458 12.6292 12.4667 12.7 12.25 12.7H3.75ZM3.75 7.5C3.53333 7.5 3.35417 7.42917 3.2125 7.2875C3.07083 7.14583 3 6.96667 3 6.75C3 6.53333 3.07083 6.35417 3.2125 6.2125C3.35417 6.07083 3.53333 6 3.75 6H15.25C15.4667 6 15.6458 6.07083 15.7875 6.2125C15.9292 6.35417 16 6.53333 16 6.75C16 6.96667 15.9292 7.14583 15.7875 7.2875C15.6458 7.42917 15.4667 7.5 15.25 7.5H3.75ZM17.375 11.975L20.5 15.1C20.65 15.25 20.7208 15.425 20.7125 15.625C20.7042 15.825 20.625 16 20.475 16.15C20.325 16.3 20.1458 16.375 19.9375 16.375C19.7292 16.375 19.55 16.3 19.4 16.15L15.75 12.5C15.6 12.35 15.525 12.175 15.525 11.975C15.525 11.775 15.6 11.6 15.75 11.45L19.4 7.8C19.55 7.65 19.7292 7.575 19.9375 7.575C20.1458 7.575 20.325 7.65 20.475 7.8C20.625 7.95 20.7 8.12917 20.7 8.3375C20.7 8.54583 20.625 8.725 20.475 8.875L17.375 11.975Z"
            fill="currentColor"
          />
        </svg>
        <svg v-else width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M3.75 18C3.53333 18 3.35417 17.9292 3.2125 17.7875C3.07083 17.6458 3 17.4667 3 17.25C3 17.0333 3.07083 16.8542 3.2125 16.7125C3.35417 16.5708 3.53333 16.5 3.75 16.5H20.25C20.4667 16.5 20.6458 16.5708 20.7875 16.7125C20.9292 16.8542 21 17.0333 21 17.25C21 17.4667 20.9292 17.6458 20.7875 17.7875C20.6458 17.9292 20.4667 18 20.25 18H3.75ZM3.75 12.7C3.53333 12.7 3.35417 12.6292 3.2125 12.4875C3.07083 12.3458 3 12.1667 3 11.95C3 11.7333 3.07083 11.5542 3.2125 11.4125C3.35417 11.2708 3.53333 11.2 3.75 11.2H20.25C20.4667 11.2 20.6458 11.2708 20.7875 11.4125C20.9292 11.5542 21 11.7333 21 11.95C21 12.1667 20.9292 12.3458 20.7875 12.4875C20.6458 12.6292 20.4667 12.7 20.25 12.7H3.75ZM3.75 7.5C3.53333 7.5 3.35417 7.42917 3.2125 7.2875C3.07083 7.14583 3 6.96667 3 6.75C3 6.53333 3.07083 6.35417 3.2125 6.2125C3.35417 6.07083 3.53333 6 3.75 6H20.25C20.4667 6 20.6458 6.07083 20.7875 6.2125C20.9292 6.35417 21 6.53333 21 6.75C21 6.96667 20.9292 7.14583 20.7875 7.2875C20.6458 7.42917 20.4667 7.5 20.25 7.5H3.75Z"
            fill="currentColor"
          />
        </svg>
      </v-header-button-icon>
      <v-header-button :class="$style.logo" @click="$router.push('/')"> Toxic Repos </v-header-button>
      <slot />
    </div>
    <div :class="$style.headerRight">
      <v-header-button href="https://t.me/darksider_bot">Добавить</v-header-button>
      <v-header-button-icon href="https://github.com/toxic-repos">
        <svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M22 13C16.9017 13 12.7724 17.1294 12.7724 22.2276C12.7724 26.3109 15.4138 29.7597 19.0818 30.9824C19.5432 31.0631 19.7162 30.7863 19.7162 30.5441C19.7162 30.3249 19.7046 29.5982 19.7046 28.8254C17.3862 29.2522 16.7864 28.2602 16.6018 27.7412C16.498 27.4759 16.0482 26.6569 15.656 26.4378C15.333 26.2647 14.8717 25.838 15.6445 25.8264C16.3712 25.8149 16.8902 26.4954 17.0632 26.7723C17.8937 28.1679 19.2202 27.7758 19.7508 27.5335C19.8315 26.9337 20.0737 26.53 20.339 26.2993C18.2859 26.0687 16.1405 25.2728 16.1405 21.7432C16.1405 20.7397 16.498 19.9092 17.0863 19.2633C16.994 19.0326 16.671 18.0867 17.1786 16.8179C17.1786 16.8179 17.9514 16.5757 19.7162 17.7638C20.4544 17.5561 21.2387 17.4523 22.0231 17.4523C22.8074 17.4523 23.5918 17.5561 24.33 17.7638C26.0948 16.5642 26.8676 16.8179 26.8676 16.8179C27.3751 18.0867 27.0521 19.0326 26.9599 19.2633C27.5481 19.9092 27.9057 20.7282 27.9057 21.7432C27.9057 25.2843 25.7487 26.0687 23.6956 26.2993C24.0301 26.5877 24.3185 27.1414 24.3185 28.0065C24.3185 29.2407 24.3069 30.2326 24.3069 30.5441C24.3069 30.7863 24.4799 31.0746 24.9413 30.9824C26.7732 30.364 28.365 29.1866 29.4927 27.6162C30.6204 26.0457 31.2272 24.1611 31.2277 22.2276C31.2277 17.1294 27.0983 13 22 13Z"
            fill="currentColor"
          />
        </svg>
      </v-header-button-icon>
      <v-header-button-icon href="https://t.me/toxic_repos">
        <svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M12.2374 21.4218C17.0692 19.3167 20.2912 17.9288 21.9033 17.2583C26.5063 15.3438 27.4627 15.0112 28.0861 15.0001C28.2232 14.9978 28.5298 15.0318 28.7284 15.1929C28.8961 15.329 28.9422 15.5128 28.9643 15.6418C28.9864 15.7708 29.0139 16.0647 28.992 16.2943C28.7426 18.9151 27.6633 25.2752 27.1142 28.2106C26.8818 29.4526 26.4244 29.8691 25.9815 29.9098C25.0189 29.9984 24.288 29.2737 23.3558 28.6626C21.897 27.7064 21.0729 27.1111 19.6569 26.178C18.0205 25.0996 19.0813 24.5069 20.0139 23.5383C20.258 23.2848 24.4988 19.4274 24.5809 19.0775C24.5912 19.0337 24.6007 18.8706 24.5038 18.7844C24.4069 18.6983 24.2639 18.7277 24.1606 18.7512C24.0143 18.7844 21.6839 20.3247 17.1694 23.3721C16.5079 23.8264 15.9087 24.0477 15.3719 24.0361C14.7801 24.0233 13.6417 23.7015 12.7955 23.4264C11.7575 23.089 10.9325 22.9106 11.0044 22.3376C11.0418 22.0391 11.4528 21.7338 12.2374 21.4218Z"
            fill="currentColor"
          />
        </svg>
      </v-header-button-icon>
      <v-header-button-icon @click="themeToggle">
        <svg v-if="themeMode === 'dark'" width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M24 31C25.9333 31 27.5833 30.3167 28.95 28.95C30.3167 27.5833 31 25.9333 31 24C31 22.0667 30.3167 20.4167 28.95 19.05C27.5833 17.6833 25.9333 17 24 17C22.0667 17 20.4167 17.6833 19.05 19.05C17.6833 20.4167 17 22.0667 17 24C17 25.9333 17.6833 27.5833 19.05 28.95C20.4167 30.3167 22.0667 31 24 31ZM24 34C21.2333 34 18.875 33.025 16.925 31.075C14.975 29.125 14 26.7667 14 24C14 21.2333 14.975 18.875 16.925 16.925C18.875 14.975 21.2333 14 24 14C26.7667 14 29.125 14.975 31.075 16.925C33.025 18.875 34 21.2333 34 24C34 26.7667 33.025 29.125 31.075 31.075C29.125 33.025 26.7667 34 24 34ZM3.5 25.5C3.06667 25.5 2.70833 25.3583 2.425 25.075C2.14167 24.7917 2 24.4333 2 24C2 23.5667 2.14167 23.2083 2.425 22.925C2.70833 22.6417 3.06667 22.5 3.5 22.5H8.5C8.93333 22.5 9.29167 22.6417 9.575 22.925C9.85833 23.2083 10 23.5667 10 24C10 24.4333 9.85833 24.7917 9.575 25.075C9.29167 25.3583 8.93333 25.5 8.5 25.5H3.5ZM39.5 25.5C39.0667 25.5 38.7083 25.3583 38.425 25.075C38.1417 24.7917 38 24.4333 38 24C38 23.5667 38.1417 23.2083 38.425 22.925C38.7083 22.6417 39.0667 22.5 39.5 22.5H44.5C44.9333 22.5 45.2917 22.6417 45.575 22.925C45.8583 23.2083 46 23.5667 46 24C46 24.4333 45.8583 24.7917 45.575 25.075C45.2917 25.3583 44.9333 25.5 44.5 25.5H39.5ZM24 10C23.5667 10 23.2083 9.85833 22.925 9.575C22.6417 9.29167 22.5 8.93333 22.5 8.5V3.5C22.5 3.06667 22.6417 2.70833 22.925 2.425C23.2083 2.14167 23.5667 2 24 2C24.4333 2 24.7917 2.14167 25.075 2.425C25.3583 2.70833 25.5 3.06667 25.5 3.5V8.5C25.5 8.93333 25.3583 9.29167 25.075 9.575C24.7917 9.85833 24.4333 10 24 10ZM24 46C23.5667 46 23.2083 45.8583 22.925 45.575C22.6417 45.2917 22.5 44.9333 22.5 44.5V39.5C22.5 39.0667 22.6417 38.7083 22.925 38.425C23.2083 38.1417 23.5667 38 24 38C24.4333 38 24.7917 38.1417 25.075 38.425C25.3583 38.7083 25.5 39.0667 25.5 39.5V44.5C25.5 44.9333 25.3583 45.2917 25.075 45.575C24.7917 45.8583 24.4333 46 24 46ZM12 14.1L9.15 11.3C8.85 11 8.70833 10.6417 8.725 10.225C8.74167 9.80833 8.88333 9.45 9.15 9.15C9.45 8.85 9.80833 8.7 10.225 8.7C10.6417 8.7 11 8.85 11.3 9.15L14.1 12C14.3667 12.3 14.5 12.65 14.5 13.05C14.5 13.45 14.3667 13.7833 14.1 14.05C13.8333 14.35 13.4917 14.5 13.075 14.5C12.6583 14.5 12.3 14.3667 12 14.1ZM36.7 38.85L33.9 36C33.6333 35.7 33.5 35.3417 33.5 34.925C33.5 34.5083 33.65 34.1667 33.95 33.9C34.2167 33.6 34.55 33.45 34.95 33.45C35.35 33.45 35.7 33.6 36 33.9L38.85 36.7C39.15 37 39.2917 37.3583 39.275 37.775C39.2583 38.1917 39.1167 38.55 38.85 38.85C38.55 39.15 38.1917 39.3 37.775 39.3C37.3583 39.3 37 39.15 36.7 38.85ZM33.9 14.1C33.6 13.8 33.45 13.45 33.45 13.05C33.45 12.65 33.6 12.3 33.9 12L36.7 9.15C37 8.85 37.3583 8.70833 37.775 8.725C38.1917 8.74167 38.55 8.88333 38.85 9.15C39.15 9.45 39.3 9.80833 39.3 10.225C39.3 10.6417 39.15 11 38.85 11.3L36 14.1C35.7333 14.3667 35.3917 14.5 34.975 14.5C34.5583 14.5 34.2 14.3667 33.9 14.1ZM9.15 38.85C8.85 38.55 8.7 38.1917 8.7 37.775C8.7 37.3583 8.85 37 9.15 36.7L12 33.9C12.3 33.6 12.65 33.45 13.05 33.45C13.45 33.45 13.8 33.6 14.1 33.9C14.4 34.2 14.55 34.55 14.55 34.95C14.55 35.35 14.4 35.7 14.1 36L11.3 38.85C11 39.15 10.6417 39.2917 10.225 39.275C9.80833 39.2583 9.45 39.1167 9.15 38.85Z"
            fill="currentColor"
          />
        </svg>
        <svg v-else-if="themeMode === 'light'" width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M24 42C19 42 14.75 40.25 11.25 36.75C7.75 33.25 6 29 6 24C6 19.5 7.325 15.6833 9.975 12.55C12.625 9.41667 16.1 7.40001 20.4 6.50001C21.7667 6.23334 22.7 6.46667 23.2 7.20001C23.7 7.93334 23.6833 8.93334 23.15 10.2C22.85 10.9667 22.6167 11.75 22.45 12.55C22.2833 13.35 22.2 14.1667 22.2 15C22.2 18 23.25 20.55 25.35 22.65C27.45 24.75 30 25.8 33 25.8C33.8333 25.8 34.6417 25.725 35.425 25.575C36.2083 25.425 36.9667 25.2167 37.7 24.95C39.1333 24.4167 40.2 24.4417 40.9 25.025C41.6 25.6083 41.7833 26.6 41.45 28C40.55 32.0333 38.5333 35.375 35.4 38.025C32.2667 40.675 28.4667 42 24 42ZM24 39C27.6333 39 30.8 37.875 33.5 35.625C36.2 33.375 37.8833 30.7333 38.55 27.7C37.7167 28.0667 36.825 28.3417 35.875 28.525C34.925 28.7083 33.9667 28.8 33 28.8C29.1667 28.8 25.9083 27.4583 23.225 24.775C20.5417 22.0917 19.2 18.8333 19.2 15C19.2 14.2 19.2833 13.3417 19.45 12.425C19.6167 11.5083 19.9167 10.4667 20.35 9.30001C17.0833 10.2 14.375 12.025 12.225 14.775C10.075 17.525 9 20.6 9 24C9 28.1667 10.4583 31.7083 13.375 34.625C16.2917 37.5417 19.8333 39 24 39Z"
            fill="currentColor"
          />
        </svg>
      </v-header-button-icon>
    </div>
  </div>
</template>

<style lang="stylus" module>
.header
  display flex
  justify-content space-between
  align-items center
  row-gap 8px
  column-gap 8px
  padding 20px

  &__left
    display flex
    justify-content flex-start
    align-items center
    column-gap 8px
    flex-wrap nowrap
    @media (max-width: 660px)
      width 100%

    .logo
      font-size var(--button-font-size)
      font-weight 500
      line-height 44px
      white-space nowrap
      height 44px
      @media (max-width: 800px)
        display none

  &__right
    display flex
    justify-content flex-end
    align-items center
    column-gap 8px
    flex-wrap nowrap

    @media (max-width: 660px)
      display none
</style>
